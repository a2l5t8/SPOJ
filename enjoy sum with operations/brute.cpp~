#include <cstdio>
#include <algorithm>
#include <cstring>

using namespace std;

typedef long long ll;

int main( void )
{
	int N, Q;
	scanf("%d%d", &N, &Q );
	int A[ N + 1 ];
	for( int i = 1; i <= N; i++ ) scanf("%d", &A[ i ] );
	while( Q-- ) {
		int t, l, r, v;
		char s[ 10 ];
		scanf("%d", &t );	
		if( t == 1 ) {
			scanf("%d%d", &v, &l );
			A[ l ] = v;
		} else {
			ll ans = 0;
			scanf("%s%d%d", s, &l, &r );
			if( !strcmp( s, "XOR" ) ) {
				for( int i = l; i < r; i++ ) {
					for( int j = i + 1; j <= r; j++ ) {
						ans += A[ i ] ^ A[ j ];
					}
				}
			}
			else if( !strcmp( s, "OR" ) ) {
				for( int i = l; i < r; i++ ) {
					for( int j = i + 1; j <= r; j++ ) {
						ans += A[ i ] | A[ j ];
					}
				}
			}
			else {
				for( int i = l; i < r; i++ ) {
					for( int j = i + 1; j <= r; j++ ) {
						ans += A[ i ] & A[ j ];
					}
				}
			}
			printf("%lld\n", ans );
		}
	}
	return 0;
}
