#include <cstdio>
#include <algorithm>
 
using namespace std;
 
int main( void )
{
	int T;
	scanf("%d", &T );
	while( T-- ) {
		int N,M;
		scanf("%d%d",&N,&M );
		int grid[ N + 1 ][ M + 1 ], dp[ N + 1 ][ M + 1 ];
		for( int i = 1; i <= N; i++ ) {
			for( int j = 1; j <= M; j++ ) {
				scanf("%d",&grid[ i ][ j ]);
				grid[ i ][ j ] = -grid[ i ][ j ];
			}
			
		}
		dp[ 1 ][ 1 ] = 0;
		for( int i = 2; i <= M; i++ ) {
			dp[ 1 ][ i ] = min( dp[ 1 ][ i - 1 ], dp[ 1 ][ i - 1 ] + grid[ 1 ][ i ] );
		}
		for( int i = 2; i <= N; i++ ) {
			dp[ i ][ 1 ] = min( dp[ 1 ][ i - 1 ] ,dp[ i - 1 ][ 1 ] + grid[ i ][ 1 ] );
		}
		printf("\n");
		for( int i = 2; i <= N; i++ ) {
			for( int j = 2; j <= M; j++ ) {
				dp[ i ][ j ] = max( 0, grid[ i ][ j ] + min( dp[ i - 1 ][ j ], dp[ i ][ j - 1 ] ) );
			}
 
		}
		for( int i = 1; i <= N; i++ ) {
			for( int j = 1; j <= M; j++ ) {
				printf("%d ", dp[ i ][ j ] );
			}
			printf("\n");
		}
		printf("%d\n", dp[ N ][ M ] + 1 );
	}
	return 0;
}	
